{% extends "admin.html.twig" %}

{% block title %}Utilisateurs{% endblock %}
{% block head %}
    {{ parent() }}
{% endblock %}
{% block admin_content %}
<main>
    <h2 class="text-secondary">Liste des utilisateurs</h2>
    <p class="lead">Gérez ici les utilisateurs et définissez leurs rôles.</p>
    <table class="table table-hover">
        <caption>Liste des utilisateurs</caption>
        <thead>
        <tr>
            <th scope="col">ID</th>
            <th scope="col">Pseudo</th>
            <th scope="col">Prénom</th>
            <th scope="col">Nom</th>
            <th scope="col">Rôles</th>
            <th scope="col" colspan="5">Edition</th>
        </tr>
    </thead>
    <tbody>
        {% for user in  users %}
            <tr>
                <th scope="row">{{ user.id }}</th>
                <td>{{ user.username }}</td>
                <td>{{ user.first_name }}</td>
                <td>{{ user.last_name }}</td>
                <td>
       {{ user.roles|json_encode(constant('JSON_PRETTY_PRINT'))|trim('"[\\"') }}  
                    {# {{ dump(user.roles)}} #}
                    {% for role in user.roles %}
                    {# {{ dump(role)}} #}
              
                        <span>{{ role }}</span>
                    {% endfor %}
                </td>
                <td>
                    <a href="./../post/{{post.id}}" class="btn btn-primary" role="button">Voir</a>
                </td>
                <td>
                    <a href="./../post/{{post.id}}" class="btn btn-secondary" role="button">Editer</a>
                </td>
                <td>
                    <button class="btn btn-danger" type="button">Supprimer</button>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</main>
{% endblock %}